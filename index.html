<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Editor Gambar - DSRT</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #previewImage {
      transition: all 0.3s ease;
      max-height: 400px;
    }
  </style>
</head>
<body class="bg-gray-900 text-white min-h-screen flex">

  <!-- Sidebar Menu -->
  <aside class="w-64 bg-gray-800 p-4 flex flex-col gap-4">
    <h1 class="text-xl font-bold text-cyan-400">Tools</h1>
    <nav class="flex flex-col gap-2">
      <button onclick="showPanel('crop')" class="py-2 px-4 bg-gray-700 rounded hover:bg-cyan-600">Crop</button>
      <button onclick="showPanel('rotate')" class="py-2 px-4 bg-gray-700 rounded hover:bg-cyan-600">Rotate</button>
      <button onclick="showPanel('adjust')" class="py-2 px-4 bg-gray-700 rounded hover:bg-cyan-600">Adjust</button>
      <button onclick="showPanel('filter')" class="py-2 px-4 bg-gray-700 rounded hover:bg-cyan-600">Filter</button>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-6 flex flex-col gap-6">
    <!-- Upload -->
    <div>
      <label class="block mb-2 text-sm font-medium text-gray-300">Upload Gambar</label>
      <input type="file" accept="image/*" onchange="uploadImage(event)" class="block w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-cyan-600 file:text-white hover:file:bg-cyan-500"/>
    </div>

    <!-- Preview -->
    <div class="bg-gray-700 rounded-xl flex-1 flex items-center justify-center">
      <img id="previewImage" src="https://via.placeholder.com/500" alt="Preview" class="rounded shadow-lg">
    </div>

    <!-- Panels -->
    <div id="toolPanel" class="bg-gray-800 p-4 rounded-xl shadow-lg hidden"></div>
  </main>

  <script>
    const toolPanel = document.getElementById('toolPanel');
    const img = document.getElementById('previewImage');
    let rotation = 0;
    let brightness = 100;
    let contrast = 100;
    let activeFilter = "";

    function uploadImage(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = (e) => {
          img.src = e.target.result;
        };
        reader.readAsDataURL(file);
      }
    }

    function updateImageStyle() {
      img.style.transform = `rotate(${rotation}deg)`;
      img.style.filter = `${activeFilter} brightness(${brightness}%) contrast(${contrast}%)`;
    }

    function showPanel(tool) {
      let content = "";
      if (tool === 'crop') {
        content = `
          <h2 class="text-lg font-semibold text-cyan-400">Crop</h2>
          <p class="text-gray-300">Fitur crop butuh canvas (belum aktif di versi ini).</p>
        `;
      } else if (tool === 'rotate') {
        content = `
          <h2 class="text-lg font-semibold text-cyan-400">Rotate</h2>
          <input type="range" min="0" max="360" value="${rotation}" class="w-full"
            oninput="rotation=this.value;updateImageStyle()">
        `;
      } else if (tool === 'adjust') {
        content = `
          <h2 class="text-lg font-semibold text-cyan-400">Adjust</h2>
          <label class="block mt-2">Brightness</label>
          <input type="range" min="50" max="200" value="${brightness}" class="w-full"
            oninput="brightness=this.value;updateImageStyle()">
          <label class="block mt-2">Contrast</label>
          <input type="range" min="50" max="200" value="${contrast}" class="w-full"
            oninput="contrast=this.value;updateImageStyle()">
        `;
      } else if (tool === 'filter') {
        content = `
          <h2 class="text-lg font-semibold text-cyan-400">Filter</h2>
          <div class="flex gap-2 mt-2 flex-wrap">
            <button onclick="activeFilter='grayscale(100%)';updateImageStyle()" class="px-3 py-1 bg-gray-700 rounded hover:bg-cyan-500">Grayscale</button>
            <button onclick="activeFilter='sepia(100%)';updateImageStyle()" class="px-3 py-1 bg-gray-700 rounded hover:bg-cyan-500">Sepia</button>
            <button onclick="activeFilter='invert(100%)';updateImageStyle()" class="px-3 py-1 bg-gray-700 rounded hover:bg-cyan-500">Invert</button>
            <button onclick="activeFilter='';updateImageStyle()" class="px-3 py-1 bg-gray-700 rounded hover:bg-cyan-500">Reset</button>
          </div>
        `;
      }
      toolPanel.innerHTML = content;
      toolPanel.classList.remove('hidden');
    }
  </script>
</body>
</html>
